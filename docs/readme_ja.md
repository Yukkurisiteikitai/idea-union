# サービスアイデア生成システム

## 概要
このシステムは、LM Studioを使用して、複数の要素を組み合わせた革新的なサービスアイデアを自動生成し、評価・選定するツールです。CSVファイルから読み込んだ要素をランダムに組み合わせ、AIによるビジョナリーサービスデザインを行います。

## 特徴
- 複数要素の組み合わせによる創造的なアイデア生成
- ビジョナリーサービスデザイナーの視点でのアイデア構築
- 並列処理による効率的なアイデア生成
- アイデア評価と優良アイデアの自動選定
- すべての生成データのJSON形式での保存

## 前提条件

### 必要環境
- Python 3.8以上
- LM Studio（ローカルLLMサーバー）
- 必要なPythonパッケージ：
  ```bash
  pip install openai asyncio
  ```

### LM Studio設定
1. LM Studioをインストールして起動
2. 使用したいモデル（デフォルト：`gemma-3-12b-it`）をダウンロード
3. モデルをロードし、「Start」ボタンを押してAPIサーバーを起動

## 設定パラメータ

| 変数名 | デフォルト値 | 説明 |
|:--|:--|:--|
| LMSTUDIO_BASE_URL | "http://localhost:1234/v1" | LM StudioのAPIエンドポイントURL。LM Studioの「Start」ボタンを押した後に表示されるURLに `/v1` を追加したもの。 |
| API_KEY | "lm-studio" | LM StudioのAPI認証キー。実際の認証には使用されない。 |
| MODEL_NAME | "gemma-3-12b-it" | 使用するLLMモデルの名前。 |
| CSV_FILENAME | "q.csv" | 要素リストを含むCSVファイルの名前。 |
| GOOD_SERVICE_FILENAME | "good-service.json" | 選定された優良アイデアを保存するJSONファイル。 |
| ALL_IDEAS_FILENAME_PREFIX | "all_ideas_" | 全アイデア保存ファイルの接頭辞（タイムスタンプが追加される）。 |
| IDEAS_PER_CYCLE | 5 | 1サイクルあたりに生成するアイデア数。 |
| NUM_ELEMENTS_TO_COMBINE | 3 | アイデア生成時に組み合わせる要素の数。 |

## 使用方法

### 準備
1. `q.csv` ファイルに要素リストを準備
   - 各行または各セルに1つの要素を記述
   - 少なくとも `NUM_ELEMENTS_TO_COMBINE` 個（デフォルト：3個）以上の要素が必要

### 実行
```bash
python service_idea_generator.py
```

### 操作
- プログラムは自動的にサイクルを繰り返し実行します
- 各サイクル間に5秒の待機時間があります
- `Ctrl+C` で安全に終了できます

## 出力ファイル
1. **all_ideas_[タイムスタンプ].json**
   - 各サイクルで生成されたすべてのアイデア
   - タイムスタンプでファイル名が区別される

2. **good-service.json**
   - 各サイクルで選定された優良アイデア（最大3つ）
   - サイクルごとに更新される

## 出力データフォーマット
生成されるJSONファイルには以下の情報が含まれます：

```json
[
  {
    "elements": ["要素1", "要素2", "要素3"],
    "raw_text": "生成されたアイデアの全文",
    "service_name": "抽出されたサービス名"
  },
  ...
]
```

## カスタマイズ
- 異なるLLMモデルを使用する場合は `MODEL_NAME` を変更
- 組み合わせる要素数を変更するには `NUM_ELEMENTS_TO_COMBINE` を調整
- サイクルごとのアイデア生成数を変更するには `IDEAS_PER_CYCLE` を調整
- システムプロンプトを変更することで、AIの出力スタイルや視点を調整可能

## エラー対応
- LM Studioが起動していない場合は接続エラーが表示される
- CSVファイルが見つからない、または要素が不足している場合はエラーメッセージが表示される
- アイデア生成中のエラーは記録され、可能な限り処理が継続される

## ライセンス
このツールはオープンソースとして提供されています。

## 注意事項
- システムリソース使用量に注意してください（並列処理によりCPU/メモリ使用量が増加する場合があります）
- 生成されたアイデアの品質はLLMモデルの性能に依存します